// HTML5 datalist plugin v.0.1
// Copyright (c) 2010-The End of Time, Mike Taylor, http://miketaylr.com
// MIT Licensed: http://www.opensource.org/licenses/mit-license.php

$.fn.datalist=function(){return((typeof this[0].list==="object")&&this[0].list!==undefined)?this:this.each(function(){var h=$(this),e=$("#"+h.attr("list")),a=e.find("option"),f=-1,d=this.value,c=h.width(),i=h.height(),g=$("<ul>",{"class":"datalist",width:c,css:{position:"absolute",left:0,top:i+6,margin:0,padding:0,"list-style":"none",border:"1px solid #ccc","-moz-box-shadow":"0px 2px 3px #ccc","-webkit-box-shadow":"0px 2px 3px #ccc","box-shadow":"0px 2px 3px #ccc","z-index":99,background:"#fff",cursor:"default"}}),b=$("<div>").css("position","relative");
if(!e.length){return this}else{a.each(function(l,k){$("<li>").css({padding:"0 2px"}).append('<span class="value">'+k.value+"</span>").append('<span class="label" style="float:right">'+k.label+"</span>").appendTo(g)})}h.keyup(function(m){var l,k;if(m.keyCode==38||m.keyCode==40){g.find("li.selected").removeClass("selected");k=g.find("li:visible");f+=m.keyCode-39;if(f==k.length){f=-1}else{if(f==-2){f=k.length-1}}l=(f==-1)?d:k.slice(f,f+1).addClass("selected").find("span.value").text();h.attr("value",l);
m.preventDefault()}else{if((l=h.attr("value"))!=d){d=l;f=-1;g.find("li.selected").removeClass("selected")}g.find("li").each(function(){$(this)[($(this).text().toLowerCase().indexOf(h.attr("value").toLowerCase())==-1)?"hide":"show"]()})}});h.wrap(b);g.hide().insertAfter(h);h.focus(function(){g.show()});h.blur(function(){g.hide()});var j=h.next().find("li");j.mousedown(function(){var k=$(this).find("span.value").text();h.val(k)})})};